<!DOCTYPE html><html lang="ja"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width">

<body>
<h1>コンピューターの速さ</h1>
<main id=main></main>
<hr>
CC BY <a href=https://ichigojam.net/>IchigoJam</a>, <a href=https://github.com/ichigojam/slide/>src on GitHub</a>

<script type="module">
import { CSV } from "https://js.sabae.cc/CSV.js";
import { transposeTable, setAutoTransposeTable } from "./transposeTable.js"; //"https://code4fukui.github.io/tableutil/table-border.css";

//const url = "https://ichigojam.github.io/slide/computer-speed/computer-speed.csv";
const url = "./computer-speed.csv";
const data = await CSV.fetchJSON(url);
console.log(data);

const csv2table = (csv, names) => {
  const cr = (tag, p) => {
    const c = document.createElement(tag);
    if (p) {
      p.appendChild(c);
    }
    return c;
  };
  const tbl = cr("table");
  for (const d of data) {
    const tr = cr("tr", tbl);
    for (const name of names) {
      const td = cr("td", tr);
      if (name == "image") {
        const img = cr("img", td);
        img.src = d[name];
        //img.src = d[name].substring("https://ichigojam.github.io/slide/computer-speed/".length);
      } else {
        td.textContent = d[name];
      }
      td.className = name;
    }
  }
  return tbl;
};

const tbl = csv2table(data, ["image", "name", "ops", "caption", "price"]);
main.appendChild(tbl);

transposeTable(tbl);
setAutoTransposeTable(tbl);

</script>

<style>
@import "https://code4fukui.github.io/tableutil/table-border.css";

img {
  height: 8em;
}
.price, .ops, .caption {
  text-align: right;
}
</style>
